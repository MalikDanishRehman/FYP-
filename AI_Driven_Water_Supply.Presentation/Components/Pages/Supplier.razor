@page "/supplier/{name}"
@rendermode InteractiveServer
@inject NavigationManager Nav

<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">

            <button class="btn btn-outline-light mb-3" @onclick='() => Nav.NavigateTo("/")'>
                ← Home
            </button>

            <h2 class="text-white text-decoration-underline mb-3">
                Ordering from: @name
            </h2>

            <p class="text-light">
                @description
            </p>

            <hr class="text-white" />

            <div class="card p-4 bg-dark text-white border-secondary">
                <div class="mb-3">
                    <label class="form-label">Number of Bottles:</label>

                    <input type="number" class="form-control"
                           min="1"
                           @bind="quantity"
                           @bind:event="oninput"
                           @bind:after="Calculate" />
                </div>

                <p class="mt-3 fs-4">
                    Price per bottle: Rs @pricePerBottle <br />
                    Total Price: <b class="text-warning">Rs @totalPrice</b>
                </p>
            </div>

            <hr class="text-white" />

            <div class="d-flex gap-3 mt-4">

                <button class="btn btn-outline-warning btn-lg w-50"
                        @onclick="AddToCart">
                    Add to Cart
                </button>

                <button class="btn btn-success btn-lg w-50"
                        @onclick="PlaceOrder">
                    Place Order
                </button>

            </div>
        </div>
    </div>
</div>

@code {
    // URL se naam yahan aayega
    [Parameter] public string name { get; set; }

    string description = "";
    int quantity = 1;
    int pricePerBottle = 120;
    int totalPrice = 120;

    protected override void OnInitialized()
    {
        // Agar naam null ho to default text
        if (string.IsNullOrEmpty(name)) name = "Unknown Supplier";

        // Random Text Logic
        var paragraphs = new List<string>
        {
            $"{name} is known for providing crystal clear, mineral-rich water delivered right to your doorstep.",
            $"Choose {name} for hygiene and speed. Highly rated by customers in your neighborhood.",
            $"{name} uses advanced filtration technology to ensure you get the safest drinking water."
        };

        var rand = new Random();
        description = paragraphs[rand.Next(paragraphs.Count)];

        Calculate();
    }

    void Calculate()
    {
        if (quantity < 1) quantity = 1;
        totalPrice = quantity * pricePerBottle;
    }

    void AddToCart()
    {
        // Cart Logic Yahan Likhein
        Console.WriteLine($"Added {quantity} bottles to cart.");
    }

    void PlaceOrder()
    {
        // Order Logic Yahan Likhein
        Console.WriteLine($"Order placed!");
    }
}