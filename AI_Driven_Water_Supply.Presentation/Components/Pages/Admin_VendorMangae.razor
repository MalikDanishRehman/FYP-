@page "/VendorManagement"
@using AI_Driven_Water_Supply.Application.Interfaces
@using AI_Driven_Water_Supply.Application.Models
@using Supabase.Postgrest.Models
@inject Supabase.Client _supabase
@inject IAuthService AuthService
@inject NavigationManager Nav
@rendermode InteractiveServer



<style>
    /* --- Base Layout (Same as Dashboard) --- */
    .admin-wrapper {
        display: flex;
        min-height: 80vh;
        gap: 20px;
        font-family: 'Poppins', sans-serif;
    }

    /* Sidebar Styling */
    .admin-sidebar {
        width: 260px;
        background: rgba(20, 25, 40, 0.7);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        flex-shrink: 0;
    }

    .sidebar-menu {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .sidebar-item {
        margin-bottom: 10px;
    }

    .sidebar-link {
        display: flex;
        align-items: center;
        padding: 12px 15px;
        color: #aaa;
        text-decoration: none;
        border-radius: 10px;
        transition: all 0.3s ease;
        font-size: 0.95rem;
    }

        .sidebar-link i {
            width: 25px;
            font-size: 1.1rem;
        }

        .sidebar-link:hover {
            background: rgba(255, 255, 255, 0.05);
            color: white;
            transform: translateX(5px);
        }

        /* Active State (Neon) */
        .sidebar-link.active {
            background: #BFFF27;
            color: black;
            font-weight: 700;
            box-shadow: 0 0 15px rgba(191, 255, 39, 0.3);
        }

    /* --- Content Area --- */
    .admin-content {
        flex-grow: 1;
        width: 100%;
    }

    /* Page Header & Search */
    .page-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
    }

    .search-box {
        background: rgba(23, 26, 43, 0.8);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 10px 15px;
        border-radius: 30px;
        display: flex;
        align-items: center;
        width: 300px;
    }

        .search-box input {
            background: transparent;
            border: none;
            color: white;
            outline: none;
            width: 100%;
            margin-left: 10px;
        }

    /* Vendor Table Styling */
    .table-container {
        background: rgba(23, 26, 43, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        padding: 20px;
        overflow-x: auto;
    }

    .custom-table {
        width: 100%;
        border-collapse: collapse;
        color: #ddd;
    }

        .custom-table th {
            text-align: left;
            padding: 15px;
            color: #BFFF27;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-weight: 600;
        }

        .custom-table td {
            padding: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            vertical-align: middle;
        }

    /* Vendor Specific Elements */
    .vendor-info {
        display: flex;
        align-items: center;
        gap: 12px;
    }

    .vendor-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: rgba(255,255,255,0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        color: white;
    }

    .rating-stars {
        color: #f1c40f;
        font-size: 0.85rem;
    }

    /* Status Badges */
    .badge {
        padding: 5px 12px;
        border-radius: 20px;
        font-size: 0.75rem;
        font-weight: 600;
    }

    .badge-verified {
        background: rgba(46, 204, 113, 0.2);
        color: #2ecc71;
        border: 1px solid #2ecc71;
    }

    .badge-pending {
        background: rgba(255, 165, 2, 0.2);
        color: #ffa502;
        border: 1px solid #ffa502;
    }

    .badge-banned {
        background: rgba(231, 76, 60, 0.2);
        color: #e74c3c;
        border: 1px solid #e74c3c;
    }

    /* Action Buttons */
    .action-btn {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        border: none;
        cursor: pointer;
        transition: 0.2s;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-right: 5px;
    }

    .btn-view {
        background: rgba(255,255,255,0.1);
        color: white;
    }

        .btn-view:hover {
            background: white;
            color: black;
        }

    .btn-approve {
        background: rgba(46, 204, 113, 0.2);
        color: #2ecc71;
    }

        .btn-approve:hover {
            background: #2ecc71;
            color: black;
        }

    .btn-ban {
        background: rgba(231, 76, 60, 0.2);
        color: #e74c3c;
    }

        .btn-ban:hover {
            background: #e74c3c;
            color: white;
        }

</style>

<div class="admin-wrapper">

    <nav class="admin-sidebar">
        <div style="margin-bottom: 30px; padding: 0 15px;">
            <small class="text-muted text-uppercase" style="letter-spacing: 1px;">Menu</small>
        </div>

        <ul class="sidebar-menu">
            <li class="sidebar-item">
                <a href="/admin-dashboard" class="sidebar-link">
                    <i class="fa-solid fa-chart-line"></i> Dashboard
                </a>
            </li>
            <li class="sidebar-item">
                <a href="/vendor-management" class="sidebar-link active">
                    <i class="fa-solid fa-store"></i> Vendor Management
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">
                    <i class="fa-solid fa-users"></i> Users List
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">
                    <i class="fa-solid fa-gavel"></i> Disputes
                </a>
            </li>
            <li class="sidebar-item">
                <a href="#" class="sidebar-link">
                    <i class="fa-solid fa-gear"></i> Settings
                </a>
            </li>
        </ul>
    </nav>

    <main class="admin-content">

        <div class="page-header">
            <h2 style="color:white; font-weight:700;">Vendor Management</h2>
            <div class="search-box">
                <i class="fa-solid fa-search" style="color:#888;"></i>
                <input type="text" placeholder="Search vendor by name...">
            </div>
        </div>

        <div class="table-container">
            <table class="custom-table">
                <thead>
                    <tr>
                        <th>Vendor Name</th>
                        <th>Shop Details</th>
                        <th>Rating</th>
                        <th>Status</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="vendor-info">
                                <div class="vendor-avatar" style="background: #3498db;">AQ</div>
                                <div>
                                    <div style="font-weight:bold; color:white;">Aqua Pure</div>
                                    <small style="color:#888;">aqua@test.com</small>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div>Gulshan-e-Iqbal, Block 4</div>
                            <small style="color:#BFFF27;">20 Litre Tanker</small>
                        </td>
                        <td>
                            <div class="rating-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star-half-stroke"></i>
                                <span style="color:#888; margin-left:5px;">(4.5)</span>
                            </div>
                        </td>
                        <td><span class="badge badge-verified">Verified</span></td>
                        <td>
                            <button class="action-btn btn-view" title="View Details"><i class="fa-solid fa-eye"></i></button>
                            <button class="action-btn btn-ban" title="Ban Vendor"><i class="fa-solid fa-ban"></i></button>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <div class="vendor-info">
                                <div class="vendor-avatar" style="background: #e67e22;">CS</div>
                                <div>
                                    <div style="font-weight:bold; color:white;">Clean Sip</div>
                                    <small style="color:#888;">clean@test.com</small>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div>North Nazimabad</div>
                            <small style="color:#BFFF27;">Bottles Only</small>
                        </td>
                        <td>
                            <span style="color:#888; font-size:0.85rem;">New Joiner</span>
                        </td>
                        <td><span class="badge badge-pending">Pending Approval</span></td>
                        <td>
                            <button class="action-btn btn-view" title="View Details"><i class="fa-solid fa-eye"></i></button>
                            <button class="action-btn btn-approve" title="Approve"><i class="fa-solid fa-check"></i></button>
                            <button class="action-btn btn-ban" title="Reject"><i class="fa-solid fa-xmark"></i></button>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <div class="vendor-info">
                                <div class="vendor-avatar" style="background: #e74c3c;">FW</div>
                                <div>
                                    <div style="font-weight:bold; color:#aaa;">Fast Water</div>
                                    <small style="color:#666;">fast@test.com</small>
                                </div>
                            </div>
                        </td>
                        <td>
                            <div style="color:#aaa;">DHA Phase 6</div>
                            <small style="color:#666;">Tanker</small>
                        </td>
                        <td>
                            <div class="rating-stars">
                                <i class="fa-solid fa-star"></i>
                                <i class="fa-solid fa-star"></i>
                                <span style="color:#888; margin-left:5px;">(2.0)</span>
                            </div>
                        </td>
                        <td><span class="badge badge-banned">Banned</span></td>
                        <td>
                            <button class="action-btn btn-view" title="View Details"><i class="fa-solid fa-eye"></i></button>
                            <button class="action-btn btn-approve" title="Unban"><i class="fa-solid fa-unlock"></i></button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

    </main>

</div>

